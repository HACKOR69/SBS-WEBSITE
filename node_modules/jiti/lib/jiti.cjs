const { createRequire } = require("node:module");
const _createJiti = require("../dist/jiti.cjs");
<<<<<<< HEAD
const transform = require("../dist/babel.cjs");
=======
>>>>>>> e14fd442fff9a548894defe2efe554f9e6d6addc

function onError(err) {
  throw err; /* ↓ Check stack trace ↓ */
}

const nativeImport = (id) => import(id);

<<<<<<< HEAD
function createJiti(id, opts = {}) {
  if (!opts.transform) {
    opts = { ...opts, transform };
=======
let _transform;
function lazyTransform(...args) {
  if (!_transform) {
    _transform = require("../dist/babel.cjs");
  }
  return _transform(...args);
}

function createJiti(id, opts = {}) {
  if (!opts.transform) {
    opts = { ...opts, transform: lazyTransform };
>>>>>>> e14fd442fff9a548894defe2efe554f9e6d6addc
  }
  return _createJiti(id, opts, {
    onError,
    nativeImport,
    createRequire,
  });
}

module.exports = createJiti;
module.exports.createJiti = createJiti;
